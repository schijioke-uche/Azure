{
  "name": "Sitecore8-deployment-on-azure",
  "tagline": "How to deploy Sitecore 8.0 solution to Microsoft Azure Web App ",
  "body": " \r\n How to deploy Sitecore 8.0 solution to Microsoft Azure Web App using Visual Studio\r\n\r\n> **NOTE:** On Azure Web Apps, Sitecore does not support scaling out App Service Plan due to shared `WWWROOT` directory between instances. Sitecore application has certain types of data that requires persistence in the file system.\r\n\r\nAfter developing a Sitecore solution in Visual Studio, it is possible to manually publish this solution to the Microsoft Azure Cloud Platform. This article provides a list of techniques that can be used to deploy a Sitecore solution to Microsoft Azure using Microsoft Visual Studio.\r\n\r\n> **Important:** It is highly recommended that you get acquainted with the [Compute Hosting Options Provided by Azure](http://azure.microsoft.com/en-us/documentation/articles/fundamentals-application-models/) and [Microsoft Azure Fundamentals](http://www.microsoftvirtualacademy.com/colleges/Azure-fundamentals) before following the instructions in this article.\r\n\r\n\r\n**Requirements:**\r\n- A work or school account / Microsoft account and a Microsoft Azure subscription with the following Azure services enabled:\r\n  - [Azure Web App](https://msdn.microsoft.com/en-us/library/azure/dn948515.aspx)\r\n  - [Azure Storage](https://msdn.microsoft.com/en-us/library/azure/gg433040.aspx)\r\n  - [Azure SQL Database](https://msdn.microsoft.com/en-us/library/azure/ee336279.aspx)\r\n- Microsoft Visual Studio 2013 / 2015\r\n- Microsoft Azure SDK 2.8.2 for .NET or newer\r\n- Microsoft SQL Server Management Studio 2014 or newer\r\n- MongoDB 2.6.1\r\n- Sitecore® Experience Platform™ 8.0 rev. 160115 (8.0 Update-7) or higher\r\n\r\n> **Note:** To download the latest version of the Microsoft Azure SDK and Tool for Visual Studio, follow this link: http://azure.microsoft.com/en-us/downloads/\r\n\r\n##Instructions\r\n\r\nThe recommended approach to deploy a Sitecore solution to Microsoft Azure using Visual Studio is as follows:\r\n\r\n1. Log in to the **Microsoft Azure Portal** using the https://portal.azure.com URL.\r\n  \r\n   ![](https://github.com/schijioke-uche/sitecore8-deployment-on-Azure/blob/master/AzurePortal-WebApp-01.png)\r\n  \r\n2. In the **Jumpbar**, click the **New** button, then select the **Web + Mobile** section and click the **Web App** button. The **Web App** blade appears.\r\n   \r\n   ![](https://github.com/schijioke-uche/sitecore8-deployment-on-Azure/blob/master/AzurePortal-WebApp-02.png)\r\n   \r\n3. In the **Web App** blade, fill in the **URL** field and configure the other section if needed, then click the **Create** button. \r\n \r\n   ![](https://github.com/schijioke-uche/sitecore8-deployment-on-Azure/blob/master/AzurePortal-WebApp-03.png)\r\n \r\n4. In the **Startboard**, click on the **Web App** tile.\r\n\r\n   ![](https://github.com/schijioke-uche/sitecore8-deployment-on-Azure/blob/master/AzurePortal-WebApp-04.png)\r\n\r\n5. In the **Web App** blade, click the **All settings** button and select the **Application settings** section.\r\n \r\n   ![](https://github.com/schijioke-uche/sitecore8-deployment-on-Azure/blob/master/AzurePortal-WebApp-05.png)\r\n \r\n6. In the **Application settings** blade, configure the following groups and save the changes.\r\n7. \r\nIn the **General settings** group:\r\n     + Set the **PHP version** switcher to the **Off** value. \r\n     + Set the **Platform** switcher to the the **64-bit** value.\r\n     + Set the **Always On** switcher to the the **On** value.\r\n     + \\[Optional\\] Set the **Remote debugging** switcher to the **On** value and select the Visual Studio version.\r\n   \r\n   ![](https://github.com/schijioke-uche/sitecore8-deployment-on-Azure/blob/master/AzurePortal-WebApp-06.png)\r\n   \r\n   - In the **Connection strings** group:\r\n     + Add the `core`, `master`, `web`, `reporting` and `session` SQL Database connection strings.\r\n     + Add the `analytics`, `tracking.live`, `tracking.history` and `tracking.contact` MongoDB connection strings.   \r\n\r\n   ![](https://github.com/schijioke-uche/sitecore8-deployment-on-Azure/blob/master/AzurePortal-WebApp-07.png)\r\n  \r\n   > **Note:** For information on deploying Sitecore databases to Azure, see the section [How to deploy Sitecore databases to Azure SQL Database](how-to-deploy-sitecore-databases-to-azure-sql-database.md).\r\n   \r\n   ```xml\r\n   Server=tcp:{server-name}.database.windows.net,1433;Database=Sitecore.Core;User ID={server-admin-login}@{server-name};Password={password};Trusted_Connection=False;Encrypt=True\r\n   Server=tcp:{server-name}.database.windows.net,1433;Database=Sitecore.Master;User ID={server-admin-login}@{server-name};Password={password};Trusted_Connection=False;Encrypt=True\r\n   Server=tcp:{server-name}.database.windows.net,1433;Database=Sitecore.Web;User ID={server-admin-login}@{server-name};Password={password};Trusted_Connection=False;Encrypt=True\r\n   Server=tcp:{server-name}.database.windows.net,1433;Database=Sitecore.Reporting;User ID={server-admin-login}@{server-name};Password={password};Trusted_Connection=False;Encrypt=True\r\n   Server=tcp:{server-name}.database.windows.net,1433;Database=Sitecore.Session;User ID={server-admin-login}@{server-name};Password={password};Trusted_Connection=False;Encrypt=True\r\n   \r\n   mongodb://{user-name}:{password}@{thehost}/sitecore_analytics\r\n   mongodb://{user-name}:{password}@{thehost}/sitecore_tracking_lives\r\n   mongodb://{user-name}:{password}@{thehost}/sitecore_tracking_historys\r\n   mongodb://{user-name}:{password}@{thehost}/sitecore_tracking_contact \r\n   ```\r\n   \r\n   > **Note:** Use the above templates as an example of default Sitecore connection strings:\r\n   > - For SQL Database connection strings, replace the `{server-name}` with the name of your Azure SQL Database service. The `{server-admin-login}` and `{password}` with SQL Server account credentials. \r\n   > - For MongoDB connection strings, replace the `{host}` with the URL of your Mongo service. The `{user-name}` and `{password}` with your Mongo account credentials.\r\n   \r\n7. In the **ASP.NET Web Application** project, include the default Sitecore files, directories and subdirectories. \r\n\r\n   > **Note:** For information on creating an ASP.NET Web Application project for Sitecore, see the section [How To Create ASP.NET Web Application Project](how-to-create-aspnet-web-application-project.md).\r\n\r\n   - For a **Content Delivery** environment:\r\n   \r\n     + \\App_Browsers\r\n     + \\App_Config\r\n     + \\App_Data\r\n     + \\Areas\r\n     + \\bin\r\n     + \\Controllers\r\n     + \\layouts\r\n     + \\Models\r\n     + \\sitecore\\services\r\n     + \\sitecore modules\r\n     + \\sitecore_files\r\n     + \\temp\r\n     + \\upload\r\n     + \\Views\r\n     + \\xsl\r\n     + \\Default.aspx\r\n     + \\default.css\r\n     + \\default.htm.sitedown\r\n     + \\default.js\r\n     + \\Global.asax\r\n     + \\Web.config\r\n     + \\webedit.css\r\n\r\n   - For a **Content Management** environment, additionally include the following directories and files:\r\n   \r\n     + \\sitecore\\admin\r\n     + \\sitecore\\Copyright\r\n     + \\sitecore\\debug\r\n     + \\sitecore\\images\r\n     + \\sitecore\\login\r\n     + \\sitecore\\portal\r\n     + \\sitecore\\samples\r\n     + \\sitecore\\service\r\n     + \\sitecore\\shell\r\n     + \\sitecore\\blocked.aspx\r\n     + \\sitecore\\default.aspx\r\n     + \\sitecore\\no.css\r\n\r\n   ![](https://github.com/schijioke-uche/sitecore8-deployment-on-Azure/blob/master/AzurePortal-WebApp-08.png)\r\n\r\n   > **Important:** Visual Studio may freeze when including the entire `\\sitecore\\shell` directory at once because it contains a lot of files and subdirectories. Try to split all the subdirectories into portions, and then add them one by one.\r\n\r\n8. For a **Content Management** environment, Visual Studio may throw the following build errors:   \r\n       \r\n   ```\r\n   Build: Cannot compile external modules unless the '--module' flag is provided.\r\n   ```   \r\n    \r\n   To address the above error, in the **ASP.NET Web Application** project's properties, switch to the **TypeScript Build** section and set the **Module system** property to the **AMD** value. Otherwise, exclude the following files from the project:\r\n   - \\sitecore\\shell\\client\\Speak\\Assets\\lib\\core\\1.2\\SitecoreSpeak.ts\r\n   - \\sitecore\\shell\\client\\Speak\\Assets\\lib\\core\\1.2\\SitecoreSpeak.d.ts\r\n    \r\n   ```\r\n   Project file must include the .NET Framework assembly 'WindowsBase, PresentationCore, PresentationFramework' in the reference list.    \r\n   ```\r\n    \r\n   To address the above error, in the **Solution Explorer** window, set the **Build Action** property to the **Content** value for the following item:\r\n   - \\sitecore\\shell\\ClientBin\\EmptySplashScreen.xaml \r\n    \r\n9. In the **Visual Studio**, click the **Tools** -> **NuGet Package Manager** -> **Packages Manager Console**. Run the following command in the **Package Manager Console** window against the **ASP.NET Web Application** project:     \r\n  \r\n   ```PowerShell\r\n   Install-Package Sitecore.Azure.Setup -Version 8.0.2\r\n   ```\r\n   \r\n10. In the **ASP.NET Web Application** project, right-click the `App_Data` item. Add the `license.xml` and `webdav.lic` files using the **Add** -> **Existing Item...** command in the context menu.\r\n\r\n   ![](https://github.com/schijioke-uche/sitecore8-deployment-on-Azure/blob/master/AzurePortal-WebApp-09.png)\r\n\r\n11. In the **ASP.NET Web Application** project, right-click the `Web.Debug.config` and then `Web.Release.config` files. Use the **Preview Transform** command in the context menu to check that all transformations look correct as you expect them to be.\r\n\r\n   ![](https://github.com/schijioke-uche/sitecore8-deployment-on-Azure/blob/master/AzurePortal-WebApp-10.png)\r\n\r\n   > **Note:** For more details about Web.config transformation syntax for Web Project Deployment using Visual Studio, see the MSDN website: http://msdn.microsoft.com/en-us/library/dd465326.aspx\r\n \r\n12. Right-click the **ASP.NET Web Application** project, and then click the **Publish...**  in the context menu. The **Publish Web** dialog box appears.     \r\n\r\n   ![](https://github.com/schijioke-uche/sitecore8-deployment-on-Azure/blob/master/AzurePortal-WebApp-11.png)\r\n\r\n13. In the **Publish Web** dialog box, in the **Profile** step, click the **Microsoft Azure Web Apps** option and select the Web App that is created in created in Microsoft Azure Portal. \r\n\r\n   ![](https://github.com/schijioke-uche/sitecore8-deployment-on-Azure/blob/master/AzurePortal-WebApp-12.png)\r\n\r\n   > **Note:** For the basic information about the Publish Web Wizard, see the MSDN website: https://msdn.microsoft.com/en-us/library/dd465337(v=vs.110).aspx \r\n\r\n",
  "note": "Don't delete this file! It's used internally to help with page regeneration."
}